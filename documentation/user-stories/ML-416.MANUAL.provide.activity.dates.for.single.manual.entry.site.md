# ML-416: MANUAL Provide Activity Dates for Single Manual Entry Site

## User Story

**AS** an applicant  
**I WANT** to provide activity dates for a single site that has been manually entered  
**SO THAT** I can inform MMO of when my activity will take place at the site

## Background

As part of the multiple sites work, it is necessary for the applicant to provide activity dates for each site they have uploaded for their notification. Previously, the user only had to provide dates for the notification as a whole.

When there is only a single site, we do not need to ask the user if the dates are the same for all sites; we just proceed straight to asking them for the dates.

## Resources

- Link to "Activity dates" page in multiple sites prototype v2
- Link to journey map - https://app.mural.co/t/defraallcompany8330/m/defraallcompany8330/1736454808160/e9f5619d6289abecef4ad6c0ff622d1802e4d8b1?wid=0-1751460610744

## Out of Scope

Logic around dates for a site entered with a file are covered under https://eaflood.atlassian.net/browse/ML-389

This story does not cover the survey link and other links in the header

This story does not cover the links in the footer

## Questions and Answers

TBC

## Screenshots

### Screenshot 1: Activity Dates Page for Single Manual Entry Site

**Page layout showing:**

- Standard GOV.UK header with crown logo and "GOV.UK" branding
- Blue service header containing "Get permission for marine work" as the service name
- Navigation area on the right side of the service header containing "Projects home", "Defra account", and "Sign out" links
- Beta banner with blue background stating "This is a new service. Help us improve it and give your feedback (opens in new tab)." with an underlined feedback link
- Back link (with left arrow) for navigation to return to the previous page
- "South coast sea samples" displayed as the project name caption above the main heading
- "Activity dates" as the main H1 heading in large, bold text
- Guidance text explaining activity date requirements: "Enter the activity dates. Allow time for potential delays, like consents (for example, a river works licence) or bad weather. If you miss the dates, you'll need to restart the process."
- Additional guidance: "You can enter a start date from today and begin your activity as soon as you've sent your information."
- Start date section with:
  - "Start date" subheading
  - "For example, 27 7 2026" hint text
  - Three input fields for Day, Month, and Year with black borders
- End date section with:
  - "End date" subheading
  - "For example, 27 8 2026" hint text
  - Three input fields for Day, Month, and Year with black borders
- "Continue" button with green background positioned below the date inputs
- "Cancel" link in blue text positioned to the right of the Continue button
- Standard GOV.UK footer with licensing and regulatory information

## Acceptance Criteria

### AC1 - Display Page

**GIVEN** I have opted to enter sites manually  
**WHEN** I select No on the Do you need to tell us about more than one site page  
**THEN** I will be taken to the "Activity dates" page to enter the dates for the single site

### AC2 - Page Behaviour

**GIVEN** I am viewing the "Activity dates" page  
**WHEN** the page is loaded  
**THEN** the page appears and behaves as per the prototype:

- the project name will appear as the page caption
- the date fields are blank
- the page will have the following minor changes from the page built for https://eaflood.atlassian.net/browse/ML-389
- First paragraph text refers to "Enter the activity dates." not to enter dates for all sites
- the date validation will continue to apply as per https://eaflood.atlassian.net/browse/ML-10

**NOTE** - this page has already been built under and is currently being accessed directly from the task list at a 'notification' level. We are re-using the same page, with the same validation, but with the dates being specific to the site. There are minor changes to the content on the page as listed above, but the behaviour is the same

### AC3 - Continue

**GIVEN** I am viewing the "Activity dates" page  
**AND** I have provided dates which pass the validation on the page  
**WHEN** I select the "Continue" button  
**THEN** I will continue to the Activity Description page

for now the flow will go to coordinates input as description page has not been built

### AC4 - Cancel

**GIVEN** I am viewing the "Activity dates" page  
**WHEN** I select the "Cancel" option  
**THEN** I am returned to the task list:

- the status of the task will not be updated
- any answers that I have provided so far will be discarded

### AC5 - Back

**GIVEN** I am viewing the "Activity dates" page  
**WHEN** I select the "Back" option  
**THEN** I am taken to the Do you need to tell us about more than one site page

## Standard Behaviour

**"Back" link** - when I select the "Back" link (if present), I will be returned to the page I was on immediately prior to the current page. Any changes I made on the current page will be discarded.

**"Cancel" link** - when I select the "Cancel" link (if present) I will be returned to the task list. Any changes I made on the current page will be discarded.

**Displaying validation errors** - if any validation errors are triggered, they will be displayed in standard GDS format i.e. [error summary](https://design-system.service.gov.uk/components/error-summary/) at the top of the page, and [error message](https://design-system.service.gov.uk/components/error-message/) against the specific item that triggered the error. The wording of error messages should be verified against the data dictionary.

---

## Implementation Status

### ✅ Completed Implementation

- **Single site activity dates flow** - Complete implementation of activity dates entry for single manually entered sites
- **Navigation integration** - Seamless integration with multiple sites question flow, bypassing "same dates for all sites" question when only one site exists
- **Page reuse with modifications** - Successful reuse of existing activity dates page with site-specific modifications
- **Validation consistency** - Maintains all existing ML-10 validation rules while adapting to site-level context
- **Test automation coverage** - All acceptance criteria validated through comprehensive test scenarios

### Technical Implementation Details

1. **Flow Integration**: Modified navigation from "Do you need to tell us about more than one site?" page to route directly to activity dates when "No" is selected
2. **Page Adaptation**: Reused existing activity dates page template with context-specific text modifications
3. **Validation Preservation**: Maintained all existing date validation rules from ML-10 implementation
4. **Navigation Consistency**: Proper back navigation to multiple sites question and cancel functionality to task list

### Test Coverage

**✅ Single Site Activity Dates Scenarios**:

- Navigation from multiple sites question directly to activity dates page
- Page display with correct project context and blank date fields
- Successful date entry and continuation to coordinates input
- Cancel functionality returning to task list without saving
- Back navigation to multiple sites question page
- Validation error handling consistent with ML-10 requirements

### Integration Points

- **Multiple Sites Question (ML-227)**: Direct navigation when "No" selected for single site scenarios
- **Activity Dates Validation (ML-10)**: Maintains all existing validation rules and error handling
- **Site Details Flow**: Continues to coordinates input method selection after successful date entry
- **Task List Integration**: Proper task status management and cancel functionality

**Priority:** Complete - Full single site activity dates functionality implemented and tested with seamless integration into the multiple sites workflow while maintaining consistency with existing validation patterns.
