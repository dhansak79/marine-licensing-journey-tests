# ML-518: Cookie Banner

## User Story

**AS** an applicant  
**I WANT** to be able to give consent or withhold consent for cookies  
**SO THAT** I can exercise my statutory privacy rights

## Background

This feature ensures compliance with privacy regulations by providing users clear control over their cookie preferences.

## Resources

Prototype cookie banner

Design system cookie banner - all 3 states are contained within one banner. Using this is optional.

Cookie flow:

## Out of Scope

Cookie page is handled by https://eaflood.atlassian.net/browse/ML-278

## Questions and Answers

TBD

## Screenshots

### Cookie Banner Before Selection

**Initial cookie consent banner showing:**

- **Banner Header**: "Cookies on Get permission for marine work" as the main heading within a prominent banner positioned at the top of the page
- **Essential Cookies Information**: Clear explanatory text stating "We use some essential cookies to make this service work."
- **Analytics Cookies Explanation**: Additional text explaining "We'd also like to use analytics cookies so we can understand how you use the service and make improvements."
- **Primary Action Buttons**: Two prominent action buttons positioned side by side:
  - "Accept analytics cookies" button with green styling indicating the positive action
  - "Reject analytics cookies" button with standard button styling for the alternative choice
- **Secondary Link**: "View cookies" link positioned below the main buttons, providing access to detailed cookie information
- **Consistent Styling**: Banner uses GOV.UK design system styling with appropriate colour contrast and typography
- **Non-intrusive Positioning**: Banner appears at the top of the page without completely blocking access to underlying content
- **Clear Visual Hierarchy**: Header, explanatory text, and action buttons are clearly differentiated through typography and spacing

### Confirmation Banners

**Accepted cookies confirmation banner showing:**

- **Confirmation Message**: "You've accepted additional cookies. You can change your cookie settings at any time." with clear, reassuring language
- **Settings Link**: "change your cookie settings" text appears as an underlined hyperlink within the confirmation message, maintaining accessibility standards
- **Hide Control**: "Hide cookie message" button with green background positioned to the right side of the banner
- **Success Styling**: Banner uses subtle styling to indicate successful completion of the cookie consent process
- **Persistent Access**: Maintains user's ability to modify their preferences even after making an initial choice

**Rejected cookies confirmation banner showing:**

- **Confirmation Message**: "You've rejected additional cookies. You can change your cookie settings at any time." providing clear feedback about the user's choice
- **Settings Link**: "change your cookie settings" text appears as an underlined hyperlink within the confirmation message
- **Hide Control**: "Hide cookie message" button with green background positioned to the right side of the banner
- **Neutral Styling**: Banner maintains consistent visual treatment regardless of user choice, avoiding any suggestion that rejection is incorrect
- **Preserved Functionality**: Ensures users can still access full cookie management options despite their initial rejection

### Cookie Flow Diagram

**User journey flow diagram showing:**

- **Entry Point**: "User Arrives / Log in" as the starting point of the cookie consent journey
- **Decision Diamond**: "Cookie decision made?" decision point directing users to appropriate paths
- **Initial Cookie Banner**: Flow shows display of initial banner when no previous decision exists (NO path)
- **Action Buttons**: Visual representation of "Accept cookies" and "Reject cookies" options leading to settings adjustment
- **Settings Process**: "Adjust settings" step following either accept or reject actions
- **Confirmation Flow**: "Hide cookie message" action leading to normal page usage
- **Alternative Paths**: Multiple entry points including "View Cookies" option and "Cookies Link" from footer
- **Cookies Page Integration**: Connection to dedicated cookies management page for detailed preferences
- **Settings Management**: "Accept cookies" and "Reject cookies" options available on the dedicated cookies page
- **Return Journey**: Clear paths back to "Any Page" maintaining user's chosen preferences
- **Persistent Access**: Footer "Cookies Link" provides ongoing access to cookie management regardless of previous choices

## Acceptance Criteria

### AC1 - Initial Display of Cookie Banner

**GIVEN** no cookie consent has been previously recorded for this user  
**WHEN** any page in the app loads  
**THEN** the cookie banner is displayed prominently at the top of the screen, offering "Accept analytics cookies", "Reject analytics cookies", and "View Cookies" options.

### AC2 - Accepting All Cookies

**GIVEN** the cookie banner is displayed on the screen  
**WHEN** the user clicks the "Accept analytics cookies" button  
**THEN** a confirmation banner appears saying that "you've accepted additional cookies" (see screenshots)

### AC3 - Rejecting All Cookies

**GIVEN** the cookie banner is displayed on the screen  
**WHEN** the user clicks the "Reject Analytics Cookies" button  
**THEN** a confirmation banner appears saying that "you've rejected additional cookies" (see screenshots)  
**AND** only non-analytics cookies are enabled, with all analytics cookies being disabled for the user's session and future visits.  
**AND** all analytics cookies are deleted

### AC4 - Click on "View Cookies" in the banner

**GIVEN** the cookie banner is displayed  
**WHEN** the View Cookies link is clicked  
**THEN** load the cookies page described in https://eaflood.atlassian.net/browse/ML-278

### AC5 - Click on "Change your cookie settings" in the banner

**GIVEN** the cookie decision confirmation banner is displayed  
**WHEN** the "Change your cookie settings link" is clicked  
**THEN** load the cookies page described in https://eaflood.atlassian.net/browse/ML-278

### AC6 - Hide Cookie message from accepted cookies

**GIVEN** that cookies have been accepted in the cookie banner  
**AND** the confirmation banner is displayed  
**WHEN** the "Hide cookie message" button is pressed  
**THEN** hide the confirmation banner

### AC7 - Hide Cookie message from rejected cookies

**GIVEN** that cookies have been rejected in the cookie banner  
**AND** the confirmation banner is displayed  
**WHEN** the "Hide cookie message" button is pressed  
**THEN** hide the confirmation banner

### AC8 - Customer proceeds without clicking cookie banner

**GIVEN** a customer has not approved or rejected analytics cookies  
**WHEN** a customer proceeds to use the Marine Licencing website  
**THEN** allow the customer to proceed without obstructing their progress  
**AND** do not hide or remove the banner
