# ML-694: RSD - Change links in "Providing site location" summary card (file upload & manual entry)

## User Story

**AS an** applicant  
**I WANT to** be able to change the sites that have been provided so far  
**SO THAT** I can ensure that my sites are correct

## Background

This story covers the ability to make changes to the answers given in the "Providing the site location" summary card of the "Review site details" page, specifically for sites that have been provided both via file upload and via manual entry.

Given the nature of the questions in the "Providing the site location" summary card, it will not be possible to make individual changes, since changing - for example - the method of providing the site location, has a knock-on effect on all the information that is provided after that point. Changing from file upload to manual entry would mean all the existing sites would become void, since we are only allowing a single method of site entry per notification. Because of this, the user won't be able to change individual values; instead they will be able to delete all their sites and start again, choosing a different method of providing the site location if they wish.

This story will provide the 'delete and start again' functionality for the "Providing the site location" summary card. It will apply on the "Review site details" page for both file upload and manual entry applications.

## Resources

- Link to "Change link behaviour analysis" in Mural
- Link to prototype in comments below

## Out of scope

N/A

## Questions and answers

N/A

## Screenshots

### AC1 Screenshot

**Image description:** The "Review site details" page showing the "Providing the site location" summary card with a "Delete all site details" link at the top right of the card. The card displays the method of providing site location and other related details without individual "Change" links next to each answer.

### AC2 Screenshot

**Image description:** The "Delete all sites?" confirmation page with the heading "Are you sure you want to delete all site details?" The page displays a warning message in a grey notification box stating "You'll lose all the site details you've already entered. This cannot be undone." Below this are two buttons: a red "Yes, delete all site details" button and a blue "Cancel" link.

## Acceptance Criteria

### AC1 - display "Providing the site location" summary card

**GIVEN** I am viewing the "Review site details" page (for both file upload and manual entry)  
**WHEN** I view the "Providing the site location" summary card  
**THEN** I see that there is a "Delete all site details" option  
**AND** there are no "Change" links against the individual answers in the summary card

### AC2 - select the "Delete all site details" option

**GIVEN** I am viewing the "Review site details" page (for both file upload and manual entry)  
**WHEN** I select the "Delete all site details" option  
**THEN** I will see the "Delete all sites?" confirmation page so that I can confirm if I want to delete all my sites or not (as per prototype)

### AC3 - Confirm deletion of all sites

**GIVEN** I am viewing the "Delete all sites?" confirmation page (as per AC2)  
**WHEN** I select the option to confirm that I want to delete all my sites  
**THEN** all my existing sites will be deleted  
**AND** I will be taken to the task list  
**AND** the "Site details" task will be labelled as "Not yet started"

### AC4 - Cancel out of deletion of all sites

**GIVEN** I am viewing the "Delete all sites?" confirmation page (as per AC2)  
**WHEN** I select the option to cancel out of making the change  
**THEN** I will be returned to the "Review site details" page  
**AND** no changes will have been made

**NOTE** - this is similar to the page that has already been implemented when selecting the "cancel" option on the "Review site details" page, and so there may be some opportunity to re-use

### AC5 - link styling

**GIVEN** I am viewing the "Review site details" page  
**WHEN** I view the "Delete all site details" link as defined in the previous ACs  
**THEN** this link should have the govuk-link--no-visited-state class so it always remains blue

**NOTE** - this is a navigational link rather than linking to content pages etc so the styling should not change once it has been clicked

## Implementation Notes

- The "Delete all site details" functionality affects both file upload and manual entry methods
- All existing site data must be cleared when confirmed
- The task list status must be reset to "Not yet started"
- Consider reusing existing cancellation page logic from the "Review site details" page
- Apply `govuk-link--no-visited-state` class to the "Delete all site details" link
