# ML-723 - RSD - Change links in "Site details" summary card (circular site)

## User story

**AS** an applicant

**I WANT** to be able to change answers from the "Review site details" page for a circular site

**SO THAT** I can ensure that my sites are correct

## Background

This story covers the ability to make changes to the answers given in the "Site details" summary card(s) of the "Review site details" page, specifically for sites that have been manually entered.

## Resources

Link to "Change link behaviour analysis" in Mural

Link to "Review site details" page for manually entered sites

## Out of scope

Change links outside of the "Site details" summary card for manually entered sites.

## Questions and answers

Q. In the scenario where the user selects the "Change" option against the "Single or multiple sets of coordinates" or "Coordinate system" question but keeps their answer the same, should we just redirect them straight back to the "Review site details" page?

A. Yes, this would represent a simpler flow for the user, and is also considered to be easier from a development point of view. Story has been updated to reflect this flow.

## Screenshots

### Flow diagram - Circular site coordinate system change

![Flow diagram showing the change journey for coordinate system on a circular site. The left side shows the Review site details page listing: Site name, Activity dates, Activity description, Single or multiple sets of coordinates, Coordinate system, Centre point coordinates, and Circle width. From the Coordinate system row, a "Change" link leads to a flow on the right showing: the "Which coordinate system do you want to use?" page with options for WGS84 and OSGB36. Two paths are shown: a "Keep coordinate system the same" button that bounces back to Review site details, and a "Change coordinate system" button that leads through the coordinate entry page before returning to Review site details via Continue button.](image-01-circular-coordinate-system-flow.png)

### Flow diagram - Single or multiple sets of coordinates change

![Flow diagram showing the change journey for single or multiple sets of coordinates on a circular site. The left side shows the Review site details page. From the "Single or multiple sets of coordinates" row, a "Change" link leads to the "How do you want to enter the site coordinates?" page with radio buttons for "Enter one set of coordinates and a width to create a circular site" and "Enter multiple sets of coordinates to mark the boundary of the site (polygon)". Two paths are shown: "Keep as circular site" button bounces back to Review site details, and "Change to polygon site" button leads through coordinate system selection and polygon coordinate entry pages before returning to Review site details.](image-02-single-multiple-coordinates-flow.png)

### Review site details page implementation

![Screenshot of the implemented Review site details page for "South coast sea samples" project showing the complete site details including: Site name (Huffington Cove samples), Activity dates (11 November 2025 to 13 November 2025), Activity description (Collect a 0.1 cubic metre seabed sample by day grab from a workboat for particle size analysis), Single or multiple sets of coordinates (Enter one set of coordinates and a width to create a circular site), Coordinate system (OSGB36 National Grid Eastings and Northings), Coordinates at centre of site (438493, 569648), Width of circular site (30 metres), and a map view showing the circular site location on the south coast. Each field has a "Change" link aligned to the right.](image-03-review-site-details-page.png)

### Flow diagram - Circle width change

![Flow diagram showing the change journey for circle width. The left side shows the Review site details page with Circle width highlighted. A "Change" link leads to the "Enter the width of the circular site in metres" page with an input field. The flow shows a "Bounce change" label indicating the user can Continue back to Review site details or use Back to return without saving changes.](image-04-circle-width-flow.png)

### Flow diagram - Activity description change

![Flow diagram showing the change journey for activity description. The left side shows the Review site details page with Activity description highlighted. A "Change" link leads to the "Activity description" page showing guidance text and a textarea for entering the description. The flow shows a "Bounce change" label indicating the user can Continue back to Review site details or use Back to return without saving changes.](image-05-activity-description-flow.png)

### Flow diagram - Site name change

![Flow diagram showing the change journey for site name. The left side shows the Review site details page with Site name highlighted. A "Change" link leads to the "Site name" page with an input field pre-populated with "Humpflethorpe pier samples". The flow shows a "Bounce change" label indicating the user can Continue back to Review site details or use Back to return without saving changes.](image-06-site-name-flow.png)

### Flow diagram - Activity dates change

![Flow diagram showing the change journey for activity dates. The left side shows the Review site details page with Activity dates highlighted. A "Change" link leads to the "Activity dates" page showing Start date and End date fields with Day, Month, Year inputs. The flow shows a "Bounce change" label indicating the user can Continue back to Review site details or use Back to return without saving changes.](image-07-activity-dates-flow.png)

### Flow diagram - Centre point coordinates change

![Flow diagram showing the change journey for centre point coordinates. The left side shows the Review site details page with Centre point coordinates highlighted. A "Change" link leads to the "Enter the coordinates at the centre point of the site" page with Latitude and Longitude input fields. The flow shows a "Bounce change" label indicating the user can Continue back to Review site details or use Back to return without saving changes.](image-08-centre-point-coordinates-flow.png)

## Acceptance criteria

### SITE NAME

**AC1 - change link for "Site name"**

GIVEN I am viewing the "Review site details" page

WHEN I select the change link against the "Site name" field for a circular site

THEN I am taken to the "Site name" page

AND the page is pre-populated with the answer I previously provided

AND I am able to -

- save changes to my answer (returns me to the "Review site details" page with changes saved)
- select 'back' (returns me to the "Review site details" page without saving any changes)

AND I am NOT able to cancel out of making the change as the "Cancel" option will not be present on the "Site name" page

NOTE - this is the same behaviour as for a polygon site (see https://eaflood.atlassian.net/browse/ML-697)

### ACTIVITY DATES

**AC2 - change link for "Activity dates"**

GIVEN I am viewing the "Review site details" page

WHEN I select the change link against the "Activity dates" field for a circular site

THEN I am taken to the "Activity dates" page

AND the page is pre-populated with the answers I previously provided

AND I am able to -

- save changes to my answer (returns me to the "Review site details" page with changes saved)
- select 'back' (returns me to the "Review site details" page without saving any changes)

AND I am NOT able to cancel out of making the change as the "Cancel" option will not be present on the "Activity dates" page

NOTE - this is the same behaviour as for a polygon site (see https://eaflood.atlassian.net/browse/ML-697)

### ACTIVITY DESCRIPTION

**AC3 - change link for "Activity description"**

GIVEN I am viewing the "Review site details" page

WHEN I select the change link against the "Activity description" field for a circular site

THEN I am taken to the "Activity description" page

AND the page is pre-populated with the answers I previously provided

AND I am able to -

- save changes to my answer (returns me to the "Review site details" page with changes saved)
- select 'back' (returns me to the "Review site details" page without saving any changes)

AND I am NOT able to cancel out of making the change as the "Cancel" option will not be present on the "Activity description" page

NOTE - this is the same behaviour as for a polygon site (see https://eaflood.atlassian.net/browse/ML-697)

### SINGLE OR MULTIPLE SETS OF COORDINATES

**AC4 - change link for "Single or multiple sets of coordinates"**

GIVEN I am viewing the "Review site details" page

WHEN I select the change link against the "Single or multiple sets of coordinates" field for a circular site

THEN I am taken to the "How do you want to enter the site coordinates?" page

AND the page is pre-populated with the answer I previously provided (i.e. circular site)

AND I am able to -

- Keep my answer as single set of coordinates (circular site) - SEE AC5a
- Change my answer to multiple sets of coordinates (polygon site) - SEE AC5b
- select 'back' (returns me to the "Review site details" page without saving any changes)

AND I am NOT able to cancel out of making the change as the "Cancel" option will not be present

NOTE - the navigation here is not a simple 'bounce' change, there is a mini flow that the user will go through as shown in the diagram above. This is because changes to one thing e.g. the coordinate system has a knock-on effect on the data entered after that point.

**AC5a - remaining flow - keep answer as "single set of coordinates"**

GIVEN I am viewing the "Which coordinate system do you want to use?" following the scenario from AC4

AND I chose to keep the answer as a single set of coordinates (circular site)

WHEN I select the "Continue" option

THEN I am returned to the "Review site details" page (anchor for the specific site I was editing)

**AC5b - remaining flow - change answer to "multiple sets of coordinates"**

GIVEN I am viewing the "How do you want to enter the site coordinates?" page following the scenario from AC4

AND I chose to change the answer to multiple sets of coordinates (polygon site)

WHEN I select the "Continue" option

THEN I am taken forward through the remaining pages of the flow to define a polygon site -

- from the "How do you want to enter the site coordinates?" page, then
- the "Which coordinate system do you want to use?" page, then
- the "Enter multiple sets of coordinates to mark the boundary of the site" page, then
- the "Review site details" page

AND I can make changes on each page as necessary

AND I can navigate forwards through this flow using the "Continue" button

AND I can navigate backwards through this flow using the "Back" link (all the way back to the "Review site details" page)

AND I am NOT able to cancel out of any of these pages as the "Cancel" option will not be present

AND no previous data is pre-populated in any page (since the previous data relates to a circular site and is not appropriate to a polygon site)

### COORDINATE SYSTEM

**AC7 - change link for "Coordinate system"**

GIVEN I am viewing the "Review site details" page

WHEN I select the change link against the "Coordinate system" field for a circular site

THEN I am taken to the "Which coordinate system do you want to use?" page

AND the page is pre-populated with the answer I previously provided

AND I am able to -

- Keep my answer the same as it was previously - SEE AC8a
- Change my answer to the other coordinate system - SEE AC8b
- select 'back' (returns me to the "Review site details" page without saving any changes)

AND I am NOT able to cancel out of making the change as the "Cancel" option will not be present

NOTE - the navigation here is not a simple 'bounce' change, there is a mini flow that the user will go through as per the diagram above. This is because changes to one thing e.g. the coordinate system has a knock-on effect on the data entered after that point.

**AC8a - remaining flow - keeping coordinate system the same**

GIVEN I am viewing the "Which coordinate system do you want to use?" page following the scenario from AC7

AND I chose to keep my answer the same as it was previously

WHEN I select the "Continue" option

THEN I am returned to the "Review site details" page (anchor for the specific site I was editing)

**AC8b - remaining flow from changing coordinate system**

GIVEN I am viewing the "Which coordinate system do you want to use?" page following the scenario from AC7

AND I chose to change my answer to the other coordinate system

WHEN I select the "Continue" option

THEN I am taken forward through the remaining pages of the flow to define a circular site -

- from the "Which coordinate system do you want to use?" page, then
- the "Enter the coordinates at the centre point of the site" page, then
- the "Review site details" page

AND I can make changes on each page as necessary

AND I can navigate forwards through this flow using the "Continue" button

AND I can navigate backwards through this flow using the "Back" link (all the way back to the "Review site details" page)

AND I am NOT able to cancel out of any of these pages as the "Cancel" option will not be present

AND my previous data is pre-populated in each page where appropriate (i.e. if I change the coordinate system then it does not make sense to default in the coordinates on the next page, since the old coordinates would be of the wrong type)

NOTE - in this scenario, I DO NOT go to the site width page

### CENTRE POINT COORDINATES

**AC9 - change link for "Coordinates at the centre of the site"**

GIVEN I am viewing the "Review site details" page

WHEN I select the change link against the list of coordinates for a circular site

THEN I am taken to the "Enter the coordinates at the centre point of the site" page

AND the page is pre-populated with the answers I previously provided

AND I am able to -

- save changes to my answers (returns me straight back to the "Review site details" page with changes saved)
- select 'back' (returns me to the "Review site details" page without saving any changes)

AND I am NOT able to cancel out of making the change as the "Cancel" option will not be present

NOTE - in this scenario, I DO NOT go to the site width page

### SITE WIDTH

**AC10 - change link for "Width of circular site"**

GIVEN I am viewing the "Review site details" page

WHEN I select the change link against the width of a circular site

THEN I am taken to the "Enter the width of the circular site in metres" page

AND the page is pre-populated with the answer I previously provided

AND I am able to -

- save changes to my answer (returns me straight back to the "Review site details" page with changes saved)
- select 'back' (returns me to the "Review site details" page without saving any changes)

AND I am NOT able to cancel out of making the change as the "Cancel" option will not be present

### LINK STYLING

**AC11 - link styling**

GIVEN I am viewing the "Review site details" page

WHEN I view any "Change", "Add", "Delete site" or "Delete all site details" links as defined in the previous ACs

THEN these links should have the govuk-link--no-visited-state class so they always remain blue

NOTE - these are navigational links rather than linking to content pages etc so the styling should not change once they have been clicked

### ANCHOR NAVIGATION

**AC12 - return user to anchor on site details summary card**

GIVEN I have amended an answer as per the previous ACs

WHEN I return to the "Review site details" page

THEN I am returned to the anchor for the specific site that I was amending

NOTE - this ensure that the user is returned to the correct point on the page, which will make things easier if they have a long list of sites
