# ML-620: URLs Redirects if Logged Out

## User Story

**AS** an applicant who is logged out  
**I WANT** to see my exception notification details if I click the link in my confirmation email  
**SO THAT** I can see my exception notification details afterwards

**AS** an applicant who is logged out  
**I WANT** to see the dashboard if I bookmark it  
**SO THAT** I can see my list of exceptions easily

## Background

Applicants need to see exemption details afterwards. They will need to be able to access them from their confirmation email. During the exemption flow, all the details are held in a Redis cache - which is deleted after logging out or session expiry or submission. This means that the URLs of the exemption flow will not show the right details if they are accessed afterwards.

Normally if a user tries to access a secured page they are redirected to the login screen with a redirect to the project name page. This is suitable for most scenarios but the URLs in the notification emails must point straight to the relevant exemption after login. Similarly bookmarks to the dashboard must work as expected after login.

## Resources

TBC

## Out of Scope

TBC

## Questions and Answers

TBC

## Screenshots

TBC

## Acceptance Criteria

### AC1 - Click on link to View Details page if logged out

**GIVEN** I am logged out  
**WHEN** I click on a link to the view details page of a specific exemption  
**AND** I log in  
**THEN** I am redirected to the View details page

### AC2 - Click on link to Dashboard if logged out

**GIVEN** I am logged out  
**WHEN** I click on a link to the Dashboard  
**AND** I log in  
**THEN** I am redirected to the Dashboard

## Standard Behaviour

**Login redirect preservation** - when I attempt to access a secured page while logged out, the system will remember my intended destination and redirect me there after successful authentication.

**Session restoration** - after logging in via a redirected link, I will have access to the full functionality of the page I intended to visit.

**Security** - all redirects will maintain appropriate security checks to ensure users can only access exemptions and data they are authorised to view.

**URL persistence** - bookmarked URLs and email links will remain valid after authentication, providing direct access to the intended page rather than requiring manual navigation.
