# ML-278: Cookies Policy Page

## User Story

**AS** an applicant  
**I WANT** to see a cookies page  
**SO THAT** I can reassure myself of the data that is being stored about me  
**AND** I can be sure that DEFRA are meeting their statutory cookie management requirements

## Background

This user story outlines the need for a dedicated "Cookies Policy" page within the DEFRA application. This page is crucial for transparency, allowing users to understand what types of cookies are used, their purpose, and how their data is managed in relation to these cookies. It also serves to demonstrate DEFRA's adherence to data protection and privacy regulations, such as GDPR and PECR, by providing clear information and control over non-essential cookies.

## Resources

- Prototype cookie page
- Cookie flow. The only part of this flow that is covered is the bottom section around the cookie page.

## Out of Scope

Cookie banner is handled by https://eaflood.atlassian.net/browse/ML-518

## Questions and Answers

Essential cookies do expire, but this is set by Defra ID and is not in the team's control.

Marine licencing application cookie details to be provided by developer for this ticket

Google Analytics cookies to be added once Google Analytics is added. In the meantime add the table but leave the cookie details blank.

Microsoft Clarity cookies details are attached.

## Screenshots

### Screenshot 1: Complete Cookies Policy Page

**Page layout showing:**

- **GOV.UK Header**: Standard black crown logo positioned in the top left corner with "GOV.UK" text, linking to the main GOV.UK homepage
- **Service Header**: Blue service navigation bar containing "Get permission for marine work" as the main service identifier, with navigation links for authenticated users (Projects, Defra account, Sign out)
- **Beta Banner**: Standard GOV.UK beta phase banner positioned below the header, indicating "This is a new service. Help us improve it and give your feedback (opens in new tab)." with an underlined feedback link
- **Back Link**: Navigation breadcrumb with "Back" link to return to the previous page
- **Page Title**: "Cookies on Get permission for marine work" as the main H1 heading
- **Introductory Content**: Clear explanation of cookie usage stating "Cookies are small files saved on your phone, tablet or computer when you visit a website. We use cookies to make this site work and collect information about how you use our service."
- **Essential Cookies Section**:
  - "Essential cookies" subheading explaining that these cookies keep information secure and do not require permission
  - Comprehensive table showing essential cookies with columns for Name, Purpose, and Expires
  - Cookie details including session management, CSRF protection, and user preferences cookies
- **Analytics Cookies Section**:
  - "Analytics cookies (optional)" subheading with explanation of data collection for service improvement
  - "Microsoft Clarity" subsection with detailed explanation of user interaction tracking
  - Comprehensive table showing Microsoft Clarity cookies (\_clck, \_clsk, CLID, ANONCHK, MUID, MR, SM) with their purposes and expiration periods
- **Cookie Settings Form**:
  - "Change your cookie settings" subheading
  - Radio button question: "Do you want to accept analytics cookies?"
  - "Yes" and "No" radio button options with appropriate selection based on current user preferences
  - "Save cookie settings" button (green) positioned below the radio buttons
- **Consistent Styling**: Blue header background (#1d70b8) following GOV.UK design system colour palette and typography standards
- **Standard GOV.UK Footer**: Contains Privacy, Cookies, Open Government Licence links, Royal coat of arms, and Crown copyright information

### Screenshot 2: Cookie Preferences Confirmation Banner

**Confirmation message showing:**

- **Success Banner**: Green-bordered notification banner positioned at the top of the cookies page
- **Banner Content**: "Success" heading followed by confirmation text "Your cookie preferences were saved. Go back to the previous page." with an underlined link
- **Persistent Page Content**: The complete cookies policy page remains visible below the confirmation banner, allowing users to review their settings or make additional changes
- **Navigation Option**: Clear "Go back to the previous page" link within the success message for easy return to the user's previous location
- **Visual Hierarchy**: The success banner uses GOV.UK design system styling with appropriate colour coding (green for success) and clear typography to ensure the confirmation message is prominent but not disruptive

The confirmation banner demonstrates successful implementation of user feedback following cookie preference updates, maintaining the user's context while providing clear confirmation of their action.

## Acceptance Criteria

### AC1 - Navigating to cookie page

**GIVEN** I am on any page of the Marine Licencing application  
**AND** I can see the application's footer  
**WHEN** I click on the "Cookies" link in the footer  
**THEN** I am navigated to a dedicated "Cookies Policy" page

### AC2 - Viewing cookie page if no decision made yet about cookies

**GIVEN** I have not made a decision about accepting cookies within Marine Licencing  
**WHEN** I click on a "Cookies" link  
**THEN** I am navigated to a dedicated "Cookies Policy" page  
**AND** the page clearly lists all the cookies types used by Marine Licencing including essential cookies  
**AND** for each cookie type it provides a concise explanation of its purpose and its duration  
**AND** the "No" radio button will be checked for accepting analytics cookies

### AC3 - Viewing cookie page if analytics cookies already not accepted

**GIVEN** I have already not accepted analytics cookies with Marine Licencing  
**WHEN** I click on a "Cookies" link  
**THEN** I am navigated to a dedicated "Cookies Policy" page  
**AND** the page clearly lists all the cookies types used by Marine Licencing including essential cookies  
**AND** for each cookie type it provides a concise explanation of its purpose and its duration  
**AND** the "No" radio button will be checked for accepting analytics cookies

### AC4 - Viewing cookie page if analytics cookies already accepted

**GIVEN** I have already accepted analytics cookies with Marine Licencing  
**WHEN** I click on a "Cookies" link  
**THEN** I am navigated to a dedicated "Cookies Policy" page  
**AND** the page clearly lists all the cookies types used by Marine Licencing  
**AND** for each cookie type it provides a concise explanation of its purpose and its duration  
**AND** the "Yes" radio button will be checked for accepting analytics cookies

### AC5 - Accept analytics cookies

**GIVEN** I am on the "Cookies Policy" page  
**WHEN** I select the Yes radio button for "Do you want to accept analytics cookies"  
**AND** I click "Save Cookie Settings"  
**THEN** enable analytics cookies  
**AND** display a banner to indicate that my preferences have been successfully updated (see screenshots section)  
**AND** stay on the "Cookies Policy" page

### AC6 - Do not accept analytics cookies

**GIVEN** I am on the "Cookies Policy" page  
**WHEN** I select the No radio button for "Do you want to accept analytics cookies"  
**AND** I click "Save Cookie Settings"  
**THEN** disable analytics cookies  
**AND** display a banner to indicate that my preferences have been successfully updated (see screenshots section)  
**AND** delete all analytics cookies  
**AND** stay on the "Cookies Policy" page

### AC7 - Back button

**GIVEN** I am on the cookies page  
**WHEN** I click on the back link  
**THEN** go back to page I was on when I clicked the Cookies link

### AC8 - Cookies not accepted by default

**GIVEN** a user has not opted to accept or reject cookies yet  
**WHEN** the user accesses any site pages  
**THEN** do not set analytics cookies for the user

### AC9 - Confirmation page back link

**GIVEN** I am on the cookies page  
**WHEN** I click on the "Go back to the previous page" link  
**THEN** go back to page I was on when I clicked the Cookies link

### AC10 - Sign-Out Link Visibility

**GIVEN** I am a logged-out user  
**WHEN** I am on the cookie page  
**THEN** I should not see a "Sign Out" link in the page header

**NOTE** - Moved AC10 from https://eaflood.atlassian.net/browse/ML-276

## Cookie Details

### Essential Cookies

Essential cookies keep your information secure while you use this service. We do not need to ask permission to use them.

| Name                    | Purpose                                                                       | Expires                 |
| ----------------------- | ----------------------------------------------------------------------------- | ----------------------- |
| session                 | Set to remember information you've entered into a form when using the service | 4 hours                 |
| userSession             | Confirms you're signed in while you use the service                           | 4 hours                 |
| csrfToken               | Helps keep your information secure when you submit forms                      | When the browser closes |
| cookies_preferences_set | Remembers that you've set your cookie preferences                             | 1 year                  |
| cookies_policy          | Saves your cookie consent preferences                                         | 1 year                  |

### Analytics Cookies (Optional)

With your permission, we use analytics cookies to collect data about how you use the Get permission for marine work service. This information helps us to improve our service.

#### Microsoft Clarity

We use Microsoft Clarity to understand how you use the service. This includes mouse movements, clicks, scrolling, and other interactions. Microsoft Clarity uses the following cookies:

| Name    | Purpose                                                                                                                                   | Expires                 |
| ------- | ----------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| \_clck  | Stores your Clarity user ID and preferences, so your visits are linked                                                                    | 1 year                  |
| \_clsk  | Groups page views from a single visit into one session                                                                                    | 1 day                   |
| CLID    | Identifies when Clarity first saw this user on any site using Clarity                                                                     | 1 year                  |
| ANONCHK | Checks whether data is shared with another Microsoft advertising cookie (ANID). This is always off because this service does not use ANID | 10 minutes              |
| MUID    | Identifies your browser when you visit Microsoft sites. Used for analytics, advertising and to help improve the service                   | 25 days                 |
| MR      | Checks whether your MUID should be refreshed                                                                                              | 7 days                  |
| SM      | Syncs your MUID across Microsoft sites                                                                                                    | When the browser closes |

## Standard Behaviour

**Footer Cookies Link** - when I select the "Cookies" link in the footer, I will be taken to the cookies policy page where I can review cookie usage and manage my preferences.

**Back Navigation** - when I select the back link on the cookies policy page, I will be returned to the page I was on when I clicked the Cookies link.

**Cookie Preference Management** - I can change my analytics cookie preferences at any time by visiting the cookies policy page and updating my selection.

**Confirmation Feedback** - after saving cookie preferences, I will see a clear confirmation message and can easily return to my previous page.

**Default Privacy Protection** - analytics cookies will not be set unless I explicitly consent to their use.

**Accessibility** - all cookie management controls will be keyboard accessible and include appropriate ARIA labels for screen readers.
