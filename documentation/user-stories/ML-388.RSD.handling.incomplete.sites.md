# ML-388: RSD - Handling Incomplete Sites

## User Story

**AS** an applicant  
**I WANT** to be notified that there are areas on my exemption notification that are not complete  
**SO THAT** I know I need to complete them before I can submit

## Background

In the multiple sites functionality, it is possible to partially complete the details of a site (for example, not providing a site name, activity dates or activity description). See https://eaflood.atlassian.net/browse/ML-232 and other tickets. Incomplete sites can be saved, but the user must complete them before their exemption notification can be submitted.

This story covers the functionality to show the "Site details" task as "In progress" if there are any incomplete sites.

## Resources

- Link to "Review site details" page showing "incomplete" sites with explanatory text at top of page
- Link to "Task list" showing "In progress" task in multiple sites prototype v2

## Out of Scope

Behaviour to mark sites as incomplete

Behaviour to provide the missing details for any missing sites

## Questions and Answers

TBC

## Screenshots

### Screenshot 1: Review Site Details Page Showing Incomplete Sites

**Page layout showing:**

- Standard GOV.UK header with crown logo and "GOV.UK" branding in white text on blue background
- Blue service header containing "Get permission for marine work" as the service name
- Navigation area on the right side of the service header containing "Projects home", "Defra account", and "Sign out" links
- Beta banner with light grey background stating "This is a new service. Help us improve it and give your feedback (opens in new tab)." with an underlined feedback link
- Back link (with left arrow) for navigation to return to the previous page
- Project name displayed as the page caption above the main heading in grey text
- "Review site details" as the main H1 heading in large, bold black text
- **Important notification banner** at the top of the content area with light grey background and red "Incomplete" label, stating:
  - "You must complete all sections marked 'Incomplete' before you can send your information."
  - "If you cannot finish now, you can return to this page later."
- **Site details summary cards** displaying multiple sites with:
  - Site identification (e.g., "Site 1 details", "Site 2 details")
  - Complete information for some fields (e.g., site name)
  - Red "Incomplete" labels next to missing required information (e.g., activity dates, activity description, site name)
  - Blue "Add" links positioned next to incomplete fields to allow users to provide missing data
  - Map view sections showing site boundaries
- "Save and continue" button with green background positioned at the bottom of all site details
- "Cancel" link in blue text positioned to the right of the Save and continue button
- Standard GOV.UK footer with copyright information

### Screenshot 2: Task List Page Showing "In Progress" Status

**Page layout showing:**

- Standard GOV.UK header with crown logo and "GOV.UK" branding
- Blue service header containing "Get permission for marine work" as the service name
- Navigation area on the right side of the service header containing "Projects", "Defra account", and "Sign out" links
- Beta banner with blue background stating "This is a new service. Help us improve it and give your feedback (opens in new tab)." with an underlined feedback link
- "Exempt activity notification" as the H1 heading in large, bold text
- Project name displayed below the main heading
- Informational text about completing the notification before sending
- **Task list** displayed as a structured list with multiple sections:
  - **Project name** task showing "Completed" status
  - **Site details** task showing "In progress" status (highlighted to demonstrate incomplete sites scenario)
  - **Public register** task showing status (e.g., "Not yet started" or "Completed")
- Each task row displays:
  - Task name as a blue hyperlink on the left
  - Status label on the right (grey for "Not yet started", blue for "In progress", or no label for "Completed")
- Clear visual hierarchy with appropriate spacing between task items
- Standard GOV.UK footer with licensing and regulatory information

The "In progress" status on the Site details task clearly indicates to the user that there are incomplete sections that need attention before the notification can be submitted.

## Acceptance Criteria

### AC1 - Display "Site details" task as "In progress"

**GIVEN** there is at least one site that is incomplete (i.e. marked as incomplete on the "Review site details" page - see https://eaflood.atlassian.net/browse/ML-232)  
**WHEN** I continue from the "Review site details" page and return to view the "Task list"  
**THEN** I see the "Site details" task is marked as "In progress"

**NOTE** - as per https://eaflood.atlassian.net/browse/ML-428, the user will be able to click on the "Site details" task to view the sites, and from there they can provide any missing details. This information is provided for context only.

### AC2 - Display "Site details" task as "Completed"

**GIVEN** there are no sites that are incomplete  
**WHEN** I view the "Task list"  
**THEN** I see the "Site details" task is marked as "Completed"

## Standard Behaviour

**"Back" link** - when I select the "Back" link (if present), I will be returned to the page I was on immediately prior to the current page. Any changes I made on the current page will be discarded.

**"Cancel" link** - when I select the "Cancel" link (if present) I will be returned to the task list. Any changes I made on the current page will be discarded.

**Task List Navigation** - when I select a task from the task list, I will be taken to the appropriate page to complete that task. If the task is already in progress, I will be taken to the most appropriate point in the journey to continue.

**Task Status Indicators** - task statuses will be clearly displayed to help users understand their progress:

- "Not yet started" - task has not been begun
- "In progress" - task has been started but not completed (e.g., has incomplete sites)
- "Completed" - task has been fully completed with all required information provided

**Displaying validation errors** - if any validation errors are triggered, they will be displayed in standard GDS format i.e. [error summary](https://design-system.service.gov.uk/components/error-summary/) at the top of the page, and [error message](https://design-system.service.gov.uk/components/error-message/) against the specific item that triggered the error. The wording of error messages should be verified against the data dictionary.
