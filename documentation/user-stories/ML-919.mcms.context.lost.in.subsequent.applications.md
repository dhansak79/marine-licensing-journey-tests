# ML-919: If Two or More Exemptions are Entered in the Same Session the MCMS Context is Only Stored in the First and Lost in All Subsequent Applications

## User Story

**AS** an applicant  
**I WANT** MCMS context to be preserved across multiple notifications in the same session  
**SO THAT** my exemption information is correctly stored for all notifications I create

## Background

When a user creates multiple exemption notifications in the same browser session, the MCMS context (Interactive Assistance Tool data) should be stored for each individual notification. However, there is a bug where the MCMS context is only stored in the first notification and is lost in all subsequent applications created in the same session.

This affects users who want to create multiple exemption notifications without logging out and back in between each one.

## Resources

Link to ML-918 (MCMS context validation)

## Out of Scope

N/A

## Questions and Answers

N/A

## Acceptance Criteria

### AC1 - First notification stores MCMS context correctly

**GIVEN** a user starts a notification with valid MCMS context  
**WHEN** the user completes all tasks and reaches the check your answers page  
**THEN** the MCMS context is stored correctly in the notification  
**AND** the MCMS context is displayed on the check your answers page

### AC2 - Second notification stores MCMS context correctly

**GIVEN** a user has completed a first notification with valid MCMS context  
**AND** the user remains in the same browser session  
**WHEN** the user starts a second notification with valid MCMS context  
**AND** the user completes all tasks and reaches the check your answers page  
**THEN** the MCMS context is stored correctly in the second notification  
**AND** the MCMS context is displayed on the check your answers page for the second notification

### AC3 - Multiple notifications maintain independent MCMS context

**GIVEN** a user has completed multiple notifications in the same session  
**WHEN** reviewing each notification  
**THEN** each notification maintains its own MCMS context data  
**AND** MCMS context from one notification does not overwrite or interfere with another

### AC4 - MCMS context persists in database

**GIVEN** multiple notifications have been created with MCMS context in the same session  
**WHEN** the data is stored in MongoDB  
**THEN** each notification record contains its own complete MCMS context  
**AND** the MCMS context is not lost or overwritten by subsequent notifications

## Standard Behaviour

**Session management** - each notification should maintain its own data isolation within the session, with MCMS context properly scoped to individual notification records.

**Data integrity** - MCMS context must be stored independently for each notification without interference from other notifications in the same session.
