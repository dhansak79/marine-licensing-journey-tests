# ML-762: Remove Activity Date and Activity Description Tasks

## User Story

**AS** an applicant  
**I WANT** to provide my activity description and dates against each individual site rather than against the notification as a whole  
**SO THAT** I can provide accurate information about the work I will conduct

## Background

The initial iteration of the solution (the 'steel thread') had a single set of activity dates and a single activity description, alongside a single site. Now that multiple sites has been implemented (along with activity dates and description per site), the initial notification-wide activity description and dates are no longer appropriate.

This story is to remove those tasks from the task list, and any associated functionality.

## Resources

- Link to task list prototype showing site details without separate activity dates and description tasks
- Related user stories:
  - [ML-10: Provide Activity Dates](./ML-10.provide.activity.dates.md) (original implementation)
  - [ML-11: Provide Activity Description](./ML-11.provide.activity.description.md) (original implementation)
  - [ML-419: Are All Activity Dates the Same](./ML-419.are.all.activity.dates.the.same.md) (multiple sites implementation)
  - [ML-420: MANUAL - Provide Activity Dates](./ML-420.MANUAL.provide.activity.dates.md) (per-site dates)
  - [ML-421: MANUAL - Provide Activity Description for Manual Entry Sites](./ML-421.MANUAL.provide.activity.description.for.manual.entry.sites.md) (per-site descriptions)

## Out of Scope

This story does not cover:

- The per-site activity dates and description functionality (already implemented)
- Changes to the check your answers page (activity dates and descriptions are already displayed per-site)
- Migration of any existing draft notifications with notification-wide dates/descriptions to the new per-site model

## Questions and Answers

**Q.** What happens to any existing draft notifications that have notification-wide activity dates and descriptions?

**A.** TBC - This will likely require a data migration strategy or graceful handling of legacy data structures.

**Q.** Will this affect the review site details page?

**A.** No - the review site details page already displays activity dates and descriptions on a per-site basis.

**Q.** Should we remove the routes and controllers entirely, or just hide them from the task list?

**A.** Remove them entirely to avoid confusion and reduce technical debt.

## Screenshots

### Screenshot 1: Updated Task List Without Activity Dates and Description Tasks

**Page layout showing:**

- Standard GOV.UK header with "Get permission for marine work" service name
- Beta banner with feedback link
- "Exempt activity notification" as the main H1 heading
- Project name displayed below the main heading
- Informational text about completing the notification before sending
- **Updated task list** displayed as a structured list showing:
  - **Project name** task (with completion status)
  - **Site details** task (containing activity dates and descriptions per site)
  - **Public register** task (with completion status)
- **Notable absence:** No separate "Activity dates" or "Activity description" tasks in the list
- "Review and send your information" section displayed when all tasks are complete
- Standard GOV.UK footer with licensing and regulatory information

The task list demonstrates the simplified structure where activity dates and descriptions are now handled within the Site details task on a per-site basis, rather than as separate notification-wide tasks.

## Acceptance Criteria

### AC1 - Remove dates and description tasks

**GIVEN** I am viewing the task list for an exemption notification  
**WHEN** I look at the list of tasks that are displayed  
**THEN** I do not see the "Activity dates" and "Activity description" tasks  
**AND** these tasks will not be considered when determining whether to display the "Review and send your information" button

### AC2 - Routes and pages are removed

**GIVEN** the activity dates and description tasks have been removed from the task list  
**WHEN** a user attempts to access the notification-wide activity dates or description pages directly via URL  
**THEN** they are redirected to an appropriate page (e.g., task list or error page)  
**AND** the system does not allow creation or editing of notification-wide dates or descriptions

### AC3 - Check your answers page unaffected

**GIVEN** I have completed all tasks including site details with per-site dates and descriptions  
**WHEN** I view the "Check your answers" page  
**THEN** the page displays activity dates and descriptions on a per-site basis as expected  
**AND** there are no references to notification-wide activity dates or descriptions

## Standard Behaviour

**Task List** - the task list displays only the relevant tasks for the current notification journey. Task completion status is determined based on the remaining tasks only.

**URL Protection** - direct navigation to removed pages via URL is prevented through appropriate redirects or error handling.

**Data Integrity** - the system maintains data integrity by ensuring activity dates and descriptions are only stored and managed at the site level.

**Navigation** - all navigation flows are updated to reflect the removal of the notification-wide activity dates and description tasks.

## Implementation Notes

### Code Changes Required

1. **Task List Configuration**
   - Remove activity dates and description task definitions from task list configuration
   - Update task completion logic to exclude these tasks

2. **Routes**
   - Remove or deprecate routes for notification-wide activity dates and description pages
   - Add redirects for any legacy URLs

3. **Controllers**
   - Remove or deprecate controllers for activity dates and description pages
   - Remove associated validation logic

4. **Views**
   - Remove Nunjucks templates for activity dates and description pages

5. **Data Models**
   - Consider deprecating notification-wide date and description fields (or mark as legacy)
   - Ensure per-site date and description fields are the source of truth

6. **Tests**
   - Remove or update tests related to notification-wide activity dates and descriptions
   - Ensure journey tests reflect the updated flow

### Migration Considerations

If there are existing draft notifications with notification-wide activity dates and descriptions, consider:

- Data migration scripts to move data to per-site fields
- Graceful handling of legacy data structures
- Clear communication to users about the changes
