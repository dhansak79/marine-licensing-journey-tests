# ML-232: FILE - RSD - Display Multiple Uploaded Sites on Review Site Details

## User Story

**AS** an applicant  
**I WANT** to review the details of the sites that uploaded via file upload  
**SO THAT** I can confirm that everything is correct

## Background

Once the user has uploaded their site file, they will be able to review the details of their sites. This capability has been delivered at a basic level for a single site under https://eaflood.atlassian.net/browse/ML-74 in iteration 1, and this story will expand on that behaviour to support multiple sites provided via file upload.

The page will support users providing missing information for their sites. The page will indicate which sites, and which data items still need to be completed. For example, if they said that all of their activity dates are different during the upload process, the user would provide the individual dates from this page. This behaviour will be covered in later stories.

## Resources

- Link to "Review site details" page in multiple sites v2 prototype - File upload version, multiple sites
- Link to data dictionary

## Out of Scope

This story does not cover:

- displaying a single uploaded site (see https://eaflood.atlassian.net/browse/ML-361)
- the ability to make changes to any of the data from this page - the behaviour of the "Change" links will be provided in a later story
- extraction of the site name from the uploaded file. That will be covered by a separate ticket
- the ability to add missing data from this page - the behaviour of the "Add" links will be provided in a later story
- the "Map view" part of the summary card, the rendering of the site coordinates will be delivered under a separate ticket
- the review of sites that have been provided by manual entry methods or drawing on a map
- an "Are you sure?" type validation message when the user clicks "Cancel"
- the link for the survey in the header
- the links in the footer

## Questions and Answers

TBC

## Screenshots

### Screenshot 1: Review Site Details Page with Multiple Uploaded Sites

**Page layout showing:**

- Standard GOV.UK header with crown logo and "GOV.UK" branding in white text on blue background at the top of the page
- Service header bar containing "Get permission for marine work" as the service name on the left
- Navigation area on the right side of the service header containing "Projects home", "Defra account", and "Sign out" links in blue text
- Beta banner with light grey background stating "This is a new service. Help us improve it and give your feedback (opens in new tab)." with an underlined feedback link
- Back link (with left arrow) for navigation to return to the previous page
- "South coast sea samples" displayed as the project name caption above the main heading in grey text
- "Review site details" as the main H1 heading in large, bold black text
- **Important notification banner** at the top of the content area with light grey background and red "Incomplete" label, stating:
  - "You must complete all sections marked 'Incomplete' before you can send your information."
  - "You can select 'Save and continue' to keep your progress and return later."
- **"Providing the site location" summary card** (grey bordered box) containing:
  - Card heading "Providing the site location"
  - **Method of providing site location**: "Upload a file with the coordinates of the site" with "Change" link
  - **File type**: "Shapefile" with "Change" link
  - **File uploaded**: "se-coast-sample-sites-coordinates.zip" with "Change" link
- **"Activity details" summary card** (grey bordered box) containing:
  - Card heading "Activity details"
  - **Are the activity dates the same for every site?**: "No" with "Change" link
  - **Is the activity description the same for every site?**: "No" with "Change" link
- **"Site 1 details" summary card** (grey bordered box) containing:
  - Card heading "Site 1 details"
  - **Site name**: "Sediment sample 1" with "Change" link
  - **Activity dates**: Red "Incomplete" label with "Add" link in blue
  - **Activity description**: Red "Incomplete" label with "Add" link in blue
  - **Map view**: Interactive map showing coastal area with a pentagon-shaped polygon site boundary marked in black outline on light blue water background
  - Map zoom controls (+/-) in bottom right corner
- **"Site 2 details" summary card** with similar structure showing:
  - **Site name**: "Sediment sample 2"
  - **Activity dates**: Red "Incomplete" label
  - **Activity description**: Red "Incomplete" label
  - **Map view**: Square-shaped polygon site boundary on interactive map
- **"Site 3 details" summary card** with similar structure showing:
  - **Site name**: "Sediment sample 3"
  - **Activity dates**: Red "Incomplete" label
  - **Activity description**: Red "Incomplete" label
  - **Map view**: Triangle-shaped polygon site boundary on interactive map
- **"Site 4 details" summary card** with similar structure showing:
  - **Site name**: "Sediment sample 4"
  - **Activity dates**: Red "Incomplete" label
  - **Activity description**: Red "Incomplete" label
  - **Map view**: Pentagon-shaped polygon site boundary on interactive map
- "Save and continue" button with green background positioned at the bottom of all site details
- "Cancel" link in blue text positioned to the right of the Save and continue button
- Standard GOV.UK footer with copyright information

## Acceptance Criteria

### AC1 - Display page

**GIVEN** I am providing multiple sites for my notification via file upload  
**WHEN** I have either:

- provided a description for all of the uploaded sites (see https://eaflood.atlassian.net/browse/ML-76) or
- indicated that the descriptions for the uploaded sites are all different (see https://eaflood.atlassian.net/browse/ML-120)

**THEN** I will be taken to the "Review site details" page (originally developed under https://eaflood.atlassian.net/browse/ML-74)  
**AND** the page will have a number of enhancements to allow it to handle multiple sites as per the following ACs

**NOTE** - it will also be possible to reach this page through other routes (as per the flow diagram above), but those behaviours will be covered in other tickets

### AC2 - New "Providing the site location" summary card

**GIVEN** I am viewing the "Review site details" page for multiple sites (as per previous AC)  
**WHEN** the page is loaded  
**THEN** the page contains a new "Providing the site location" summary card  
**AND** the summary card contains the following rows (each populated as per the existing behaviour defined in ML-74):

- Method of providing the site location - "Upload a file with the coordinates of the site"
- File type - either "KML" or "Shapefile"
- File uploaded - the file name, including extension

**NOTE** - "Change" and "Add" links are not within the scope of this ticket

### AC3 - New "Activity details" summary card

**GIVEN** I am viewing the "Review site details" page for multiple sites  
**WHEN** the page is loaded  
**THEN** the page contains a new "Activity details" summary card  
**AND** the summary card contains the following rows:

- Are the activity dates the same for every site? - displays either "Yes" or "No" depending on how the user answered during the journey
- Activity dates - displays the date range provided during the journey. This row is only displayed if I selected that the dates are the same for every site
- Is the activity description the same for every site? - displays either "Yes" or "No" depending on how the user answered during the journey
- Activity description - displays the description provided during the journey. This row is only displayed if I selected that the description is the same for every site

**NOTE** - the "Activity details" summary card is intended to summarise the dates and descriptions for activities where the user has indicated that sites share the same dates/description. The idea is to display those pieces of information once at the top of the page, rather than repeating the same data in every summary card for every site. Where dates/descriptions are not shared, they will be displayed against each individual site as expected.

**NOTE** - "Change" and "Add" links are not within the scope of this ticket

### AC4 - Display multiple "Site details" summary cards

**GIVEN** I am viewing the "Review site details" page for multiple sites  
**WHEN** the page is loaded  
**THEN** I see one "Site details" card for each site from my uploaded file  
**AND** the content of the "site details" summary card(s) is described in the following ACs

### AC5 - "Site details" summary card(s) content

**GIVEN** I am viewing the "Review site details" page (as per previous AC)  
**WHEN** I view the summary card for a site  
**THEN** the summary card contains:

- Summary card title - displays "Site n details" where "n" is a sequential number for the sites e.g. "Site 1 details"
- Site name - displays "Incomplete" (styled as per prototype), since the site name will be extracted from the file under a separate ticket
- Activity dates - displays "Incomplete" (styled as per prototype). This row is only displayed if I selected that the dates are not the same for every site
- Activity description - displays "Incomplete" (styled as per prototype). This row is only displayed if I selected that the description is not the same for every site
- Map view - not covered by this story

**NOTE** - the behaviour of the "Change" and "Add" links are not within the scope of this ticket

### AC6 - Paragraph text at top of page

**GIVEN** I am viewing the "Review site details" page  
**WHEN** there are any "Incomplete" sites on the page (i.e. those where "Incomplete" is displayed against name, dates or description)  
**THEN** I see an additional line of text at the top of the page indicating that all sections marked as "Incomplete" must be completed (see prototype)  
**AND** this line of text is not displayed if there are no incomplete sites on the page

## Standard Behaviour

**"Back" link** - when I select the "Back" link (if present), I will be returned to the page I was on immediately prior to the current page. Any changes I made on the current page will be discarded.

**"Cancel" link** - when I select the "Cancel" link (if present) I will be returned to the task list. Any changes I made on the current page will be discarded.

**Displaying validation errors** - if any validation errors are triggered, they will be displayed in standard GDS format i.e. [error summary](https://design-system.service.gov.uk/components/error-summary/) at the top of the page, and [error message](https://design-system.service.gov.uk/components/error-message/) against the specific item that triggered the error. The wording of error messages should be verified against the data dictionary.
